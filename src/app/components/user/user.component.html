<div class="user-management">
    <h2>User Management</h2>

    <!-- Create User Form -->
    <div *ngIf="canCreateUser()">
        <h3>Create New User</h3>
        <form (ngSubmit)="createUser()">
            <label>
                Name:
                <input [(ngModel)]="newUser.name" name="name" required />
            </label>
            <label>
                Username:
                <input [(ngModel)]="newUser.username" name="username" required />
            </label>
            <label>
                Email:
                <input [(ngModel)]="newUser.email" name="email" type="email" required />
            </label>
            <button type="submit">Create User</button>
        </form>
    </div>

    <!-- Edit User Form -->
    <div *ngIf="editing && selectedUser && canUpdateUser()">
        <h3>Edit User</h3>
        <form (ngSubmit)="updateUser()">
            <label>
                Name:
                <input [(ngModel)]="selectedUser.name" name="editName" required />
            </label>
            <label>
                Username:
                <input [(ngModel)]="selectedUser.username" name="editUsername" required />
            </label>
            <label>
                Email:
                <input [(ngModel)]="selectedUser.email" name="editEmail" type="email" required />
            </label>
            <button type="submit">Update User</button>
            <button type="button" (click)="resetForm()">Cancel</button>
        </form>
    </div>

    <!-- Users List -->
    <div *ngIf="canReadUser()">
        <h3>User List</h3>
        <ul>
            <li *ngFor="let user of users">
                <span>{{ user.name }} ({{ user.role }})</span>
                <button (click)="selectUser(user)" *ngIf="canUpdateUser()">Edit</button>
                <button (click)="deleteUser(user.id)" *ngIf="canDeleteUser()">Delete</button>
            </li>
        </ul>
    </div>
</div>